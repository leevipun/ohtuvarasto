{% extends "base.html" %}

{% block title %}{{ warehouse['name'] }} - Warehouse Management{% endblock %}

{% block content %}
<h1>{{ warehouse['name'] }}</h1>

<div class="warehouse-details">
    <div class="info-box">
        <h3>Warehouse Information</h3>
        <p><strong>Capacity:</strong> {{ warehouse['varasto'].tilavuus }}</p>
        <p><strong>Current Balance:</strong> {{ warehouse['varasto'].saldo }}</p>
        <p><strong>Available Space:</strong> {{ warehouse['varasto'].paljonko_mahtuu() }}</p>
    </div>
    
    <div class="actions">
        <a href="{{ url_for('edit_warehouse', warehouse_id=warehouse['id']) }}" class="btn btn-secondary">Edit Warehouse</a>
        <a href="{{ url_for('index') }}" class="btn btn-secondary">Back to List</a>
    </div>
</div>

<h2>Items</h2>

<form method="post" action="{{ url_for('add_item', warehouse_id=warehouse['id']) }}" class="form inline-form">
    <div class="form-group">
        <label for="item_name">Item Name:</label>
        <input type="text" id="item_name" name="item_name" required>
    </div>
    <div class="form-group">
        <label for="quantity">Quantity:</label>
        <input type="number" id="quantity" name="quantity" step="0.01" min="0.01" required>
    </div>
    <button type="submit" class="btn btn-primary">Add Item</button>
</form>

{% if warehouse['items'] %}
<table class="items-table">
    <thead>
        <tr>
            <th>Item Name</th>
            <th>Quantity</th>
            <th>Actions</th>
        </tr>
    </thead>
    <tbody>
        {% for item_name, quantity in warehouse['items'].items() %}
        <tr>
            <td>{{ item_name }}</td>
            <td>
                <form method="post" action="{{ url_for('edit_item', wid=warehouse['id'], item_name=item_name) }}" class="inline-form-mini">
                    <input type="number" name="quantity" value="{{ quantity }}" step="0.01" min="0" required>
                    <button type="submit" class="btn-small btn-primary">Update</button>
                </form>
            </td>
            <td>
                <form action="{{ url_for('delete_item', wid=warehouse['id'], item_name=item_name) }}" method="post" style="display: inline;" onsubmit="return confirm('Delete this item?');">
                    <button type="submit" class="btn-small btn-danger">Delete</button>
                </form>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% else %}
<p class="empty-state">No items in this warehouse yet. Add one above!</p>
{% endif %}

{% endblock %}
